{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.input');\nconst fetchBtn = document.querySelector('.btn');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.spinner');\n\nconst newGallery = new SimpleLightbox('.gallery a');\n\nconst API_KEY = '41458722-788aa599ff2a579d31eb49587';\n\nconst url = new URL('https://pixabay.com/api/');\nurl.searchParams.append('key', `${API_KEY}`);\nurl.searchParams.append('image_type', 'photo');\nurl.searchParams.append('orientation', 'horizontal');\nurl.searchParams.append('safesearch', 'true');\n\nlet tagPhoto;\n\ninput.addEventListener('input', event => {\n  tagPhoto = event.target.value;\n});\n\nconst fetchPhotos = () => {\n  url.searchParams.delete('q');\n  url.searchParams.append('q', `${tagPhoto}`);\n  return fetch(url).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n};\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  loader.classList.add('loader');\n  gallery.innerHTML = '';\n\n  fetchPhotos()\n    .then(photos => {\n      if (photos.total === 0) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n      }\n      addPic(photos.hits);\n      newGallery.refresh();\n    })\n    .catch(error => {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    })\n    .finally(() => {\n      form.reset();\n      loader.classList.remove('loader');\n    });\n});\n\n// ---------------------------------------------------------\n\nfunction addPic(arr) {\n  gallery.insertAdjacentHTML(\n    'afterbegin',\n    arr.reduce(\n      (\n        html,\n        { largeImageURL, webformatURL, likes, views, comments, downloads }\n      ) =>\n        html +\n        `<li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\">\n          \n            <div class=\"pic-item\">\n              <img src=\"${webformatURL}\" alt=\"photo\">\n            </div>\n            <ul class=\"information-list\">\n              <li class=\"information-item\">likes<br>${likes}</li>\n              <li class=\"information-item\">views<br>${views}</li>\n              <li class=\"information-item\">comments<br>${comments}</li>\n              <li class=\"information-item\">downloads<br>${downloads}</li>\n            </ul>\n          \n          </a>\n        </li>`,\n      ''\n    )\n  );\n}\n"],"names":["form","input","gallery","loader","newGallery","SimpleLightbox","API_KEY","url","tagPhoto","event","fetchPhotos","response","photos","iziToast","addPic","error","arr","html","largeImageURL","webformatURL","likes","views","comments","downloads"],"mappings":"6vBAKA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,QAAQ,EAC5B,SAAS,cAAc,MAAM,EAC9C,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,UAAU,EAE1CC,EAAa,IAAIC,EAAe,YAAY,EAE5CC,EAAU,qCAEVC,EAAM,IAAI,IAAI,0BAA0B,EAC9CA,EAAI,aAAa,OAAO,MAAO,GAAGD,GAAS,EAC3CC,EAAI,aAAa,OAAO,aAAc,OAAO,EAC7CA,EAAI,aAAa,OAAO,cAAe,YAAY,EACnDA,EAAI,aAAa,OAAO,aAAc,MAAM,EAE5C,IAAIC,EAEJP,EAAM,iBAAiB,QAASQ,GAAS,CACvCD,EAAWC,EAAM,OAAO,KAC1B,CAAC,EAED,MAAMC,EAAc,KAClBH,EAAI,aAAa,OAAO,GAAG,EAC3BA,EAAI,aAAa,OAAO,IAAK,GAAGC,GAAU,EACnC,MAAMD,CAAG,EAAE,KAAKI,GAAY,CACjC,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,GAGHX,EAAK,iBAAiB,SAAUS,GAAS,CACvCA,EAAM,eAAc,EACpBN,EAAO,UAAU,IAAI,QAAQ,EAC7BD,EAAQ,UAAY,GAEpBQ,EAAa,EACV,KAAKE,GAAU,CACVA,EAAO,QAAU,GACnBC,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UACpB,CAAS,EAEHC,EAAOF,EAAO,IAAI,EAClBR,EAAW,QAAO,CACxB,CAAK,EACA,MAAMW,GAAS,CACdF,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAClB,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CACbb,EAAK,MAAK,EACVG,EAAO,UAAU,OAAO,QAAQ,CACtC,CAAK,CACL,CAAC,EAID,SAASW,EAAOE,EAAK,CACnBd,EAAQ,mBACN,aACAc,EAAI,OACF,CACEC,EACA,CAAE,cAAAC,EAAe,aAAAC,EAAc,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAElEN,EACA;AAAA,qBACaC;AAAA;AAAA;AAAA,0BAGKC;AAAA;AAAA;AAAA,sDAG4BC;AAAA,sDACAC;AAAA,yDACGC;AAAA,0DACCC;AAAA;AAAA;AAAA;AAAA,eAKpD,EACD,CACL,CACA"}