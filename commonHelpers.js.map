{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.input');\nconst fetchBtn = document.querySelector('.btn');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.spinner');\n\nconst API_KEY = '41458722-788aa599ff2a579d31eb49587';\n\nconst url = new URL('https://pixabay.com/api/');\nurl.searchParams.append('key', `${API_KEY}`);\nurl.searchParams.append('image_type', 'photo');\nurl.searchParams.append('orientation', 'horizontal');\nurl.searchParams.append('safesearch', 'true');\n\ninput.addEventListener('input', event => {\n  url.searchParams.append('q', `${event.target.value}`);\n});\n\nconst fetchPhotos = () => {\n  return fetch(url).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n};\n\nconst newGallery = new SimpleLightbox('.gallery a');\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  loader.classList.add('loader');\n\n  fetchPhotos(url)\n    .then(photos => {\n      if (photos.total === 0) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n      }\n      addPic(photos.hits);\n      newGallery.refresh();\n    })\n    .catch(error => console.log(error))\n    .finally(() => {\n      form.reset();\n      loader.classList.remove('loader');\n    });\n});\n\n// ---------------------------------------------------------\n\nfunction addPic(arr) {\n  gallery.insertAdjacentHTML(\n    'afterbegin',\n    arr.reduce(\n      (\n        html,\n        { largeImageURL, webformatURL, likes, views, comments, downloads }\n      ) =>\n        html +\n        `<li class=\"gallery-item\">\n          <a class=\"imgLink\" href=\"${largeImageURL}\">\n          \n            <div class=\"pic-item\">\n              <img src=\"${webformatURL}\" alt=\"photo\">\n            </div>\n            <ul class=\"information-list\">\n              <li class=\"information-item\">likes<br>${likes}</li>\n              <li class=\"information-item\">views<br>${views}</li>\n              <li class=\"information-item\">comments<br>${comments}</li>\n              <li class=\"information-item\">downloads<br>${downloads}</li>\n            </ul>\n          \n          </a>\n        </li>`,\n      ''\n    )\n  );\n}\n"],"names":["form","input","gallery","loader","API_KEY","url","event","fetchPhotos","response","newGallery","SimpleLightbox","photos","iziToast","addPic","error","arr","html","largeImageURL","webformatURL","likes","views","comments","downloads"],"mappings":"6vBAKA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,QAAQ,EAC5B,SAAS,cAAc,MAAM,EAC9C,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,UAAU,EAE1CC,EAAU,qCAEVC,EAAM,IAAI,IAAI,0BAA0B,EAC9CA,EAAI,aAAa,OAAO,MAAO,GAAGD,GAAS,EAC3CC,EAAI,aAAa,OAAO,aAAc,OAAO,EAC7CA,EAAI,aAAa,OAAO,cAAe,YAAY,EACnDA,EAAI,aAAa,OAAO,aAAc,MAAM,EAE5CJ,EAAM,iBAAiB,QAASK,GAAS,CACvCD,EAAI,aAAa,OAAO,IAAK,GAAGC,EAAM,OAAO,OAAO,CACtD,CAAC,EAED,MAAMC,EAAc,IACX,MAAMF,CAAG,EAAE,KAAKG,GAAY,CACjC,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,EAGGC,EAAa,IAAIC,EAAe,YAAY,EAElDV,EAAK,iBAAiB,SAAUM,GAAS,CACvCA,EAAM,eAAc,EACpBH,EAAO,UAAU,IAAI,QAAQ,EAE7BI,EAAe,EACZ,KAAKI,GAAU,CACVA,EAAO,QAAU,GACnBC,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UACpB,CAAS,EAEHC,EAAOF,EAAO,IAAI,EAClBF,EAAW,QAAO,CACxB,CAAK,EACA,MAAMK,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ,IAAM,CACbd,EAAK,MAAK,EACVG,EAAO,UAAU,OAAO,QAAQ,CACtC,CAAK,CACL,CAAC,EAID,SAASU,EAAOE,EAAK,CACnBb,EAAQ,mBACN,aACAa,EAAI,OACF,CACEC,EACA,CAAE,cAAAC,EAAe,aAAAC,EAAc,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAElEN,EACA;AAAA,qCAC6BC;AAAA;AAAA;AAAA,0BAGXC;AAAA;AAAA;AAAA,sDAG4BC;AAAA,sDACAC;AAAA,yDACGC;AAAA,0DACCC;AAAA;AAAA;AAAA;AAAA,eAKpD,EACD,CACL,CACA"}